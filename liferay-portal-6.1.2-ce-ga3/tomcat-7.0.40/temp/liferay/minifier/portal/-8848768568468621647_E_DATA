Liferay.Util.portletTitleEdit=function(){};if(!themeDisplay.isStatePopUp()){AUI().ready("aui-io-request","aui-live-search","aui-overlay-context-panel","event-mouseenter","liferay-message","node-focusmanager","transition",function(c){var l=c.getBody();var a=c.one("#cpContextPanelTemplate");var k=c.one("#cpPortletTitleHelpIcon");var o="";var e=false;if(a){o=a.attr("data-portlet-id");e=(a.attr("data-visible-panel")=="true")}var j="show-portlet-description-"+o;var f=c.Lang.trim;var d="display-panel-columns";var b="panels-minimized";var h="search-panel-active";var m={persist:true};var n="#controlPanelMenuAddContentPanelContainer ul li a";var g='<a class="cancel-search" href="javascript:;"></a>';var p='<div id="minimize-panels"><a href="javascript:;"><span>'+Liferay.Language.get("minimize-panels")+"</span></a></div>";var i={init:function(){var q=this;q._renderUI();q._bindUI();q._createDataConnection();q._createCancelButton();q._createFocusManager();q._createLiveSearch()},_afterHiddenChange:function(r){var q=this;q._uiSetHidden(r.newVal,r.persist)},_bindUI:function(){var q=this;Liferay.set("controlPanelSidebarHidden",l.hasClass(b));Liferay.after("controlPanelSidebarHiddenChange",q._afterHiddenChange,q);q._panelToggleButton.on("click",q._toggleHidden,q);q._searchPanelHolder.on("click",q._setVisible,q);q._togglePanelsAction();q._panelHolder.on(["mouseenter","mouseleave"],q._togglePanelsAction,q);var r=Liferay.Panel.get("addContentPanelContainer");if(r){r.on("collapse",function(s){if(Liferay.get("controlPanelSidebarHidden")){s.preventDefault()}})}Liferay.publish("focusSearchBar",{defaultFn:c.bind(q._focusSearchBar,q)});c.getDoc().on("keyup",function(s){if(s.isKey("ESC")){Liferay.fire("focusSearchBar")}})},_createCancelButton:function(){var r=this;var q=c.Node.create(g);r._searchPanelHolder.append(q);var s=c.all(n);q.on("click",function(t){l.removeClass(h);r._searchPanelInput.val("").focus();s.show();r._searchActive=false})},_createDataConnection:function(){var q=this;q._saveData=c.io.request(themeDisplay.getPathMain()+"/portal/session_click",{autoLoad:false})},_createFocusManager:function(){var q=this;var s=c.one("#controlPanelMenuAddContentPanelContainer");s.plug(c.Plugin.NodeFocusManager,{descendants:".lfr-panel-content ul li a:visible",keys:{next:"down:40",previous:"down:38"}});var r=s.focusManager;q._refreshFocusManagerTask=c.debounce(r.refresh,50,r);q._searchPanelInput.on("key",function(t){r.focus(0)},"down:40")},_createLiveSearch:function(){var q=this;var s=q._searchPanelInput;var r=new c.LiveSearch({input:s,nodes:n,data:function(t){return t.text()},on:{search:function(t){if(f(r.get("searchValue"))){l.addClass(h);q._searchActive=true}}},after:{search:function(t){q._searchActive=true;q._refreshFocusManagerTask();if(!f(r.get("searchValue"))){l.removeClass(h);q._searchActive=false}}}});q._liveSearch=r},_focusSearchBar:function(r){var q=this;q._searchPanelInput.selectText();Liferay.set("controlPanelSidebarHidden",false,m)},_renderUI:function(){var q=this;var r=c.one(".search-panels");var w=r.one("#_160_searchPanel");var s=c.one(".control-panel-tools");var t=c.Node.create(p);var v=c.one(".panel-page-menu");var u=t.one("a");s.append(t);w.attr("autocomplete","off");if(a){q._helpBox=new Liferay.Message({contentBox:a,id:j,persistenceCategory:"enable-portlet-descriptions",strings:{dismissAll:Liferay.Language.get("or-disable-for-all-portlets")},trigger:k,type:"help",visible:a.test(":visible")}).render()}q._controlPanelTools=s;q._panelHolder=v;q._panelToggleButton=u;q._searchPanelHolder=r;q._searchPanelInput=w;q._togglePanels=t},_setVisible:function(r){var q=this;Liferay.set("controlPanelSidebarHidden",false,m)},_toggleHidden:function(r){var q=this;Liferay.set("controlPanelSidebarHidden",!Liferay.get("controlPanelSidebarHidden"),m)},_togglePanelsAction:function(s){var q=this;var r=0;if(s){r=q._eventOpacities[s.type]}q._togglePanels.transition({opacity:r})},_uiSetHidden:function(s,w){var q=this;var v=q._liveSearch;var u=q._panelCfg;var r=u.closeValue;var t=q._searchValue;if(!s){r=u.openValue}else{t="";q._searchValue=v.get("searchValue")}v.search(t);l.removeClass(d);q._panelHolder.transition({left:r,easing:"ease-out",duration:0.2},function(){if(w){q._saveData.set("data",{"control-panel-sidebar-minimized":s}).start()}l.addClass(d);l.toggleClass(b,s);if(!s){q._searchPanelInput.selectText()}});l.toggleClass(h,(q._searchActive&&!s))},_eventOpacities:{mouseenter:1,mouseleave:0},_panelCfg:{closeValue:"-198px",openValue:"0"},_searchActive:false,_searchValue:""};i.init()})};